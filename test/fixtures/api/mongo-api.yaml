{"swagger":"2.0","info":{"version":"1.0.0","title":"koa-oai-router example"},"consumes":["application/json"],"produces":["application/json"],"basePath":"/api","paths":{"/user/luck":{"get":{"tags":["user"],"description":"find a luck user","x-oai-controller":[{"file":"user","handler":"luck"}],"parameters":[{"name":"name","in":"query","type":"string","required":true,"description":"username"}],"responses":{"200":{"description":"user's info","schema":{"title":"äºº","type":"object","required":["name","sex","height","weight"],"properties":{"name":{"type":"string"},"sex":{"type":"string","enum":["male","female"]},"height":{"type":"integer","format":"int32","minimum":10,"maximum":100},"weight":{"type":"number","format":"float","minimum":10,"maximum":100},"mobile":{"type":"string"}}}},"default":{"description":"unexpected error","schema":{"title":"Error","type":"object","required":["status","error"],"properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}}}}},"/user":{"post":{"summary":"Create user(s)","tags":["user"],"x-oai-controller":[{}],"parameters":[{"in":"body","name":"data","type":"object","schema":{"type":"object","required":["items"],"properties":{"items":{"type":"array","items":{"title":"user","type":"object","properties":{"name":{"type":"string","default":"mike"},"age":{"type":"number"},"email":{"type":"string"},"address":{"type":"string"},"male":{"type":"boolean"},"bornAt":{"type":"string","default":"2016-12-20T09:08:47.597Z","format":"date-time"},"likes":{"type":"array","items":{"type":"string"}}},"required":["name"]}}}},"required":true}],"responses":{"200":{"schema":{"type":"object","required":["items"],"properties":{"items":{"type":"array","items":{"title":"user","type":"object","properties":{"name":{"type":"string","default":"mike"},"age":{"type":"number"},"email":{"type":"string"},"address":{"type":"string"},"male":{"type":"boolean"},"bornAt":{"type":"string","default":"2016-12-20T09:08:47.597Z","format":"date-time"},"likes":{"type":"array","items":{"type":"string"}}},"required":["name"]}}}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}},"get":{"summary":"Find user(s)","tags":["user"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":false},{"name":"fields","type":"string","format":"json","in":"query","required":false},{"name":"skip","type":"number","format":"int32","in":"query","required":false,"default":0},{"name":"limit","type":"number","format":"int32","in":"query","required":false,"default":0},{"name":"sort","type":"string","format":"json","in":"query","required":false},{"name":"populate","type":"string","format":"json","in":"query","required":false}],"responses":{"200":{"schema":{"type":"object","required":["items"],"properties":{"items":{"type":"array","items":{"title":"user","type":"object","properties":{"name":{"type":"string","default":"mike"},"age":{"type":"number"},"email":{"type":"string"},"address":{"type":"string"},"male":{"type":"boolean"},"bornAt":{"type":"string","default":"2016-12-20T09:08:47.597Z","format":"date-time"},"likes":{"type":"array","items":{"type":"string"}}},"required":["name"]}}}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}},"delete":{"summary":"Delete some user","tags":["user"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":true}],"responses":{"200":{"schema":{"title":"multiUpdateSchema","type":"object","properties":{"ok":{"type":"number","format":"int32"},"nModified":{"type":"number","format":"int32"},"n":{"type":"number","format":"int32"}}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}},"put":{"summary":"Update user(s)","tags":["user"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":false,"description":"Support all mongo where filter."},{"name":"options","type":"string","in":"query","required":false,"description":"Support mongoose options"},{"name":"update","type":"object","in":"body","required":false,"schema":{"title":"user","type":"object","properties":{"name":{"type":"string","default":"mike"},"age":{"type":"number"},"email":{"type":"string"},"address":{"type":"string"},"male":{"type":"boolean"},"bornAt":{"type":"string","default":"2016-12-20T09:08:47.597Z","format":"date-time"},"likes":{"type":"array","items":{"type":"string"}}},"minProperties":1},"description":"More then one filed should be input."}],"responses":{"200":{"schema":{"title":"multiUpdateSchema","type":"object","properties":{"ok":{"type":"number","format":"int32"},"nModified":{"type":"number","format":"int32"},"n":{"type":"number","format":"int32"}}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}},"/user/count":{"get":{"summary":"Count user","tags":["user"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":false}],"responses":{"200":{"schema":{"title":"countSchema","type":"object","properties":{"count":{"type":"number","format":"int32"}}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}},"/user/drop":{"delete":{"summary":"Drop user database, dangerous!","tags":["user"],"x-oai-controller":[{}],"parameters":[],"responses":{"200":{"schema":{"title":"user","type":"object","properties":{"name":{"type":"string","default":"mike"},"age":{"type":"number"},"email":{"type":"string"},"address":{"type":"string"},"male":{"type":"boolean"},"bornAt":{"type":"string","default":"2016-12-20T09:08:47.597Z","format":"date-time"},"likes":{"type":"array","items":{"type":"string"}}},"required":["name"]}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}},"/user/findOne":{"get":{"summary":"Find user","tags":["user"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":false},{"name":"fields","type":"string","format":"json","in":"query","required":false},{"name":"populate","type":"string","format":"json","in":"query","required":false}],"responses":{"200":{"schema":{"title":"user","type":"object","properties":{"name":{"type":"string","default":"mike"},"age":{"type":"number"},"email":{"type":"string"},"address":{"type":"string"},"male":{"type":"boolean"},"bornAt":{"type":"string","default":"2016-12-20T09:08:47.597Z","format":"date-time"},"likes":{"type":"array","items":{"type":"string"}}},"required":["name"]}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}},"/user/findOneAndUpdate":{"put":{"summary":"Update user","tags":["user"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":false,"description":"Support all mongo where filter."},{"name":"options","type":"string","in":"query","required":false,"description":"Support mongoose options"},{"name":"update","type":"object","in":"body","required":false,"schema":{"title":"user","type":"object","properties":{"name":{"type":"string","default":"mike"},"age":{"type":"number"},"email":{"type":"string"},"address":{"type":"string"},"male":{"type":"boolean"},"bornAt":{"type":"string","default":"2016-12-20T09:08:47.597Z","format":"date-time"},"likes":{"type":"array","items":{"type":"string"}}},"minProperties":1},"description":"More then one filed should be input."}],"responses":{"200":{"schema":{"title":"user","type":"object","properties":{"name":{"type":"string","default":"mike"},"age":{"type":"number"},"email":{"type":"string"},"address":{"type":"string"},"male":{"type":"boolean"},"bornAt":{"type":"string","default":"2016-12-20T09:08:47.597Z","format":"date-time"},"likes":{"type":"array","items":{"type":"string"}}},"required":["name"]}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}},"/book":{"post":{"summary":"Create book(s)","tags":["book"],"x-oai-controller":[{}],"parameters":[{"in":"body","name":"data","type":"object","schema":{"type":"object","required":["items"],"properties":{"items":{"type":"array","items":{"title":"book","type":"object","properties":{"name":{"type":"string"},"author":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}}}},"required":true}],"responses":{"200":{"schema":{"type":"object","required":["items"],"properties":{"items":{"type":"array","items":{"title":"book","type":"object","properties":{"name":{"type":"string"},"author":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}}}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}},"get":{"summary":"Find book(s)","tags":["book"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":false},{"name":"fields","type":"string","format":"json","in":"query","required":false},{"name":"skip","type":"number","format":"int32","in":"query","required":false,"default":0},{"name":"limit","type":"number","format":"int32","in":"query","required":false,"default":0},{"name":"sort","type":"string","format":"json","in":"query","required":false},{"name":"populate","type":"string","format":"json","in":"query","required":false}],"responses":{"200":{"schema":{"type":"object","required":["items"],"properties":{"items":{"type":"array","items":{"title":"book","type":"object","properties":{"name":{"type":"string"},"author":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}}}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}},"delete":{"summary":"Delete some book","tags":["book"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":true}],"responses":{"200":{"schema":{"title":"multiUpdateSchema","type":"object","properties":{"ok":{"type":"number","format":"int32"},"nModified":{"type":"number","format":"int32"},"n":{"type":"number","format":"int32"}}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}},"put":{"summary":"Update book(s)","tags":["book"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":false,"description":"Support all mongo where filter."},{"name":"options","type":"string","in":"query","required":false,"description":"Support mongoose options"},{"name":"update","type":"object","in":"body","required":false,"schema":{"title":"book","type":"object","properties":{"name":{"type":"string"},"author":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"minProperties":1},"description":"More then one filed should be input."}],"responses":{"200":{"schema":{"title":"multiUpdateSchema","type":"object","properties":{"ok":{"type":"number","format":"int32"},"nModified":{"type":"number","format":"int32"},"n":{"type":"number","format":"int32"}}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}},"/book/count":{"get":{"summary":"Count book","tags":["book"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":false}],"responses":{"200":{"schema":{"title":"countSchema","type":"object","properties":{"count":{"type":"number","format":"int32"}}}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}},"/book/drop":{"delete":{"summary":"Drop book database, dangerous!","tags":["book"],"x-oai-controller":[{}],"parameters":[],"responses":{"200":{"schema":{"title":"book","type":"object","properties":{"name":{"type":"string"},"author":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}},"/book/findOne":{"get":{"summary":"Find book","tags":["book"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":false},{"name":"fields","type":"string","format":"json","in":"query","required":false},{"name":"populate","type":"string","format":"json","in":"query","required":false}],"responses":{"200":{"schema":{"title":"book","type":"object","properties":{"name":{"type":"string"},"author":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}},"/book/findOneAndUpdate":{"put":{"summary":"Update book","tags":["book"],"x-oai-controller":[{}],"parameters":[{"name":"where","type":"string","format":"json","in":"query","required":false,"description":"Support all mongo where filter."},{"name":"options","type":"string","in":"query","required":false,"description":"Support mongoose options"},{"name":"update","type":"object","in":"body","required":false,"schema":{"title":"book","type":"object","properties":{"name":{"type":"string"},"author":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"minProperties":1},"description":"More then one filed should be input."}],"responses":{"200":{"schema":{"title":"book","type":"object","properties":{"name":{"type":"string"},"author":{"type":"string","x-ref":"user","description":"Refers to user","pattern":"^[0-9a-fA-F]{24}$"}},"required":["name"]}},"400":{"schema":{"title":"paramError","type":"object","properties":{"status":{"type":"integer"},"type":{"type":"string"},"path":{"type":"string"},"error":{"type":"string"},"detail":{"type":"object"}}}},"default":{"schema":{"title":"interError","type":"object","properties":{"status":{"type":"integer"},"message":{"type":"string"},"stack":{"type":"string"}}}}}}}}}